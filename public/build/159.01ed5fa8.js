(self.webpackChunk=self.webpackChunk||[]).push([[159],{82:(t,e,s)=>{"use strict";s.d(e,{uD:()=>i,iA:()=>r,Nl:()=>l,ct:()=>o,ab:()=>u,Tw:()=>a,UE:()=>c});s(6992),s(1539),s(8783),s(3948),s(285);var n=s(4752);function i(t,e){var s=new URLSearchParams;return s.append("first",t),s.append("last",e),n.Z.getRequest("/api/event/upcoming/list",{params:s}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}function r(){return n.Z.getRequest("/api/event/upcoming/show",{}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}function l(){return n.Z.getRequest("/api/event/topbanner/list",{}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}function o(){return n.Z.getRequest("/api/event/running/show",{}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}function u(t){return n.Z.getRequest("/api/section/"+t+"/results/list",{}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}function a(t){return n.Z.getRequest("/api/event/"+t+"/results/list",{}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}function c(){return n.Z.getRequest("/api/document/list",{}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}},4159:(t,e,s)=>{"use strict";s.d(e,{Z:()=>c});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Title",{attrs:{title:"RESULTS",info:t.Event.label}}),t._v(" "),s("b-row",{staticClass:"no-gutters"},[s("b-col",{attrs:{cols:"10"}},[s("ul",{ref:"pillsWrapper",staticClass:"pills-wrapper nav nav-pills",on:{mousedown:t.pillsMouseDown,mousemove:t.pillsMouseMove,mouseup:function(e){t.pillsScrolling=!1},mouseleave:function(e){t.pillsScrolling=!1}}},t._l(t.sectionResults,(function(e,n){return s("li",{class:{active:n===t.activeSection},on:{click:function(s){return t.showSectionResults(e.id,n)}}},[t._v("\n          "+t._s(e.label)+"\n        ")])})),0)]),t._v(" "),"timer"!==t.Event.resultType?s("b-col",{staticClass:"text-center overall-pill-wrapper",attrs:{cols:"2"}},[s("div",{class:{active:!t.activeSection},on:{click:t.showOverallResults}},[t._v("Overall")])]):t._e()],1),t._v(" "),t.resultsLoading?t._e():s("table",{staticClass:"results-table"},[s("tbody",[s("tr",[s("th",{staticStyle:{"padding-left":"12px"}},[t._v("Pos.")]),t._v(" "),s("th",{staticStyle:{"padding-left":"6px"}},[t._v("#")]),t._v(" "),s("th",[t._v("Car")]),t._v(" "),t._m(0),t._v(" "),"point"===t.Event.resultType?s("th",[t._v("Point")]):t._e(),t._v(" "),"point"!==t.Event.resultType?s("th",[t._v("Time")]):t._e(),t._v(" "),t._m(1)]),t._v(" "),t._l(t.results,(function(e,n){return s("tr",[s("td",[t._v(t._s(n+1))]),t._v(" "),s("td",[t._v(t._s(e.participant.number))]),t._v(" "),s("td",[t._v(t._s(e.participant.car))]),t._v(" "),s("td",[t._v("\n        "+t._s(e.participant.driver.firstName)+" "+t._s(e.participant.driver.lastName)),s("br"),t._v(" "),e.participant.coDriver?s("div",[t._v("\n        "+t._s(e.participant.coDriver.firstName)+" "+t._s(e.participant.coDriver.lastName)+"\n        ")]):t._e()]),t._v(" "),"point"===t.Event.resultType||"timer"===t.Event.resultType?s("td",[t._v("\n        "+t._s(e.dnf?"dnf":e.value?e.value:"NA")+"\n      ")]):t._e(),t._v(" "),"startend"===t.Event.resultType||"cumulative"===t.Event.resultType?s("td",[t._v("\n        "+t._s(e.dnf?"dnf":e.valueNumber?e.formattedResultValue:"NA")+"\n      ")]):t._e(),t._v(" "),s("td",{domProps:{innerHTML:t._s(t.diffRes(e,n,t.Event.resultType))}})])}))],2)]),t._v(" "),t.resultsLoading||0!==t.results.length?t._e():s("span",{staticStyle:{"font-family":"'Signal center light'","font-weight":"bold"}},[t._v("No results yet.")]),t._v(" "),t.resultsLoading?s("div",{staticClass:"loader"}):t._e(),t._v(" "),0!==t.allResults||t.resultsLoading?t._e():s("span",{staticClass:"circle",on:{click:t.showAllResults}},[s("i",{staticClass:"fas fa-ellipsis-h"})])],1)};n._withStripped=!0;s(5666),s(6528),s(4916),s(3123),s(1058),s(3710),s(9554),s(4747),s(9826),s(2707),s(9653),s(7042),s(1539),s(8674);var i=s(7324),r=s(82);function l(t,e,s,n,i,r,l){try{var o=t[r](l),u=o.value}catch(t){return void s(t)}o.done?e(u):Promise.resolve(u).then(n,i)}function o(t){return function(){var e=this,s=arguments;return new Promise((function(n,i){var r=t.apply(e,s);function o(t){l(r,n,i,o,u,"next",t)}function u(t){l(r,n,i,o,u,"throw",t)}o(void 0)}))}}const u={name:"ResultsTable",props:["Event"],components:{Title:i.Z},data:function(){return{resultsLoading:!1,results:[],sectionResults:[],allResults:0,activeSection:0}},filters:{msToTime:function(t){if(t>0){var e=Math.floor(t%1e3/100),s=Math.floor(t/1e3%60),n=Math.floor(t/6e4%60),i=Math.floor(t/36e5%24);return i?i+":"+(n<10?"0"+n:n)+":"+(s<10?"0"+s:s)+"."+String(e).padEnd(1,"0"):n?n+":"+(s<10?"0"+s:s)+"."+String(e).padEnd(1,"0"):s+"."+String(e).padEnd(1,"0")}return t}},methods:{diffRes:function(t,e,s){return t.dnf?"dnf":("cumulative"===s||t.value&&0!==e)&&t.valueNumber&&0!==e?"point"===s?"+"+(this.results[e-1]-t.value)+"<br/>+"+(this.results[0]-t.value):"startend"===s||"cumulative"===s?"+"+this.$options.filters.msToTime(1e3*t.valueNumber-1e3*this.results[e-1].valueNumber)+"<br/>+"+this.$options.filters.msToTime(1e3*t.valueNumber-1e3*this.results[0].valueNumber):"+"+this.$options.filters.msToTime(this.timeFormatToMs(t.value)-this.timeFormatToMs(this.results[e-1].value))+"<br/>+"+this.$options.filters.msToTime(this.timeFormatToMs(t.value)-this.timeFormatToMs(this.results[0].value)):""},timeFormatToMs:function(t){return 36e5*(t=t.split(":"))[0]+6e4*t[1]+1e3*t[2]+parseInt(t[3])},timeDiff:function(t,e){return new Date(e)-new Date(t)},getLeafSections:function(t){var e=this;t.forEach((function(t){t.childrenSections.length>0?e.getLeafSections(t.childrenSections):e.sectionResults.find((function(e){return e.id===t.id}))||e.sectionResults.push({id:t.id,label:t.label,results:null})}))},fetchSectionResults:function(t){return o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.ab)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},fetchEventResults:function(t){return o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.Tw)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},pillsMouseDown:function(t){var e=this.$refs.pillsWrapper;this.pillsScrolling=!0,this.pillsStartX=t.pageX-e.offsetLeft,this.pillsScrollLeft=e.scrollLeft},pillsMouseMove:function(t){if(this.pillsScrolling){var e=this.$refs.pillsWrapper,s=t.pageX-e.offsetLeft-this.pillsStartX;e.scrollLeft=this.pillsScrollLeft-s}},showAllResults:function(){-1!==this.activeSection?this.results=this.sectionResults[this.activeSection].results.sort((function(t,e){return Number(t.dnf)-Number(e.dnf)})):this.results=this.Event.results.sort((function(t,e){return Number(t.dnf)-Number(e.dnf)})),this.allResults=1},showSectionResults:function(t,e){var s=this,n=this;n.results=[],n.resultsLoading=!0,n.activeSection=e,n.allResults=1,n.fetchSectionResults(t).then((function(t){s.resultsLoading=!1,n.sectionResults[n.activeSection].results=t.data.sort((function(t,e){return Number(t.dnf)-Number(e.dnf)})),n.results=n.sectionResults[n.activeSection].results.slice(0,10),n.sectionResults[n.activeSection].results.length>10?n.allResults=0:n.allResults=1}))},showOverallResults:function(){var t=this,e=this;e.results=[],e.resultsLoading=!0,e.allResults=1,e.activeSection=-1,e.Event.results?(e.resultsLoading=!1,e.results=e.Event.results.slice(0,10),e.Event.results.length>10&&(e.allResults=0)):e.fetchEventResults(e.Event.id).then((function(s){t.resultsLoading=!1,e.Event.results=s.data.sort((function(t,e){return Number(t.dnf)-Number(e.dnf)})),e.results=e.Event.results.slice(0,10),e.Event.results.length>10&&(e.allResults=0)}))}},mounted:function(){console.log(Event);var t=this;t.Event.sections&&(t.getLeafSections(t.Event.sections),t.sectionResults.length>0?t.showSectionResults(t.sectionResults[0].id,t.activeSection):this.showOverallResults())}};var a=(0,s(1900).Z)(u,n,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",[t._v("Driver"),s("br"),t._v("Co-Driver")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",[t._v("Diff. Prev."),s("br"),t._v("Diff. First")])}],!1,null,"1d50281a",null);a.options.__file="assets/components/ResultsTable.vue";const c=a.exports},7324:(t,e,s)=>{"use strict";s.d(e,{Z:()=>l});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{staticClass:"section-title-wrapper"},[s("b-col",{staticClass:"section-title",attrs:{sm:"6","align-self":"stretch"}},[s("h2",[t._v("\n      "+t._s(t.title)+"\n    ")])]),t._v(" "),s("b-col",{staticClass:"section-title-info",attrs:{sm:"6","align-self":"stretch"}},[s("h6",[t._v("\n      "+t._s(t.info)+"\n    ")])])],1)};n._withStripped=!0;const i={name:"Title",props:["title","info"]};var r=(0,s(1900).Z)(i,n,[],!1,null,"8676d326",null);r.options.__file="assets/components/Title.vue";const l=r.exports}}]);